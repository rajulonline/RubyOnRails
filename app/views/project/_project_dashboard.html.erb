<!doctype html>

<%- model_class = Project -%>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<script type="text/javascript"></script>
		<div class="page-header">
			<h1> <%= 'Project Dashboard' %></h1>
		</div>
		
		
<div id="chart_div" style="width: 900px; height: 500px;"></div>

<div id="chart_div"></div>
<script type="text/javascript">
  $(function() {
    drawChart();
  });

  function drawChart() {
  	
          var data = google.visualization.arrayToDataTable([
          ['Project', 'Dashboard'],
          ['OpenTestCases',  <%= @post_count %> ],
          ['Open Defects',     <%=@defect_count%> ],
          ['In Progress Requirements',<%=@req_count%>  ],
        ]);

          var options = {
              title: 'Project Dashboard'
          };

          var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
          chart.draw(data, options);
          
          google.visualization.events.addListener(chart,'select', selectHandler);
           function selectHandler() {
           alert('You selected ');
          
           $.ajax({
           type: "POST",
           url: "/posts/index" // the URL of the controller action method
                  });
           }
      }
</script>
 
